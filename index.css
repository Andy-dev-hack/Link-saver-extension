body {
  margin: 0;
  padding: 15px;
  font-family: Arial, Helvetica, sans-serif;
  background: #2c2c2c;
  color: #eaeaea;
  min-width: 350px;
  min-height: 500px;
  
  /* üåü Extension Border Glow */
  border-radius: 10px; 
  box-shadow: 
      0 0 10px rgba(74, 110, 169, 0.5), 
      0 0 20px rgba(74, 110, 169, 0.3);
}

/* --- Extension Title Style --- */
#extension-title {
    font-size: 2.2em;
    font-weight: bold;
    text-align: center;
    margin: 0 0 20px 0;
    color: #fff;
    /* Blue Neon Glow Effect */
    text-shadow: 
        0 0 5px rgba(74, 110, 169, 0.8),
        0 0 10px rgba(74, 110, 169, 0.6),
        0 0 20px rgba(74, 110, 169, 0.4);
    letter-spacing: 2px;
}

/* --- Control Layout --- */
.controls {
  display: flex;
  flex-direction: column; 
  gap: 0; 
  margin-bottom: 12px;
  max-width: 600px; 
}

.control-row {
    display: flex;
    flex-wrap: wrap; 
    gap: 8px; 
    /* margin-bottom is handled explicitly per row below */
    margin-bottom: 0; 
}

/* ‚≠ê Row 1: Link/Tab Save Row (Border below it) */
.link-save-row {
    padding-bottom: 12px; 
    margin-bottom: 12px; 
    border-bottom: 1px solid #484848; 
    flex-wrap: nowrap; 
    align-items: center;
}

/* ‚≠ê Row 2: Folder Selection Row (Border below it + separation from line above) */
.folder-select-row {
    /* Separation from Row 1 border */
    margin-top: 12px; 
    /* Spacing and border below this row */
    padding-bottom: 12px; 
    margin-bottom: 12px; 
    border-bottom: 1px solid #484848; 
}

/* ‚≠ê Row 3: Folder Creation Row (Separation from line above) */
.folder-create-row {
    /* Separation from Row 2 border */
    margin-top: 12px;
    margin-bottom: 8px; /* Standard margin for bottom-most row */
}


/* --- Label Style --- */
.selector-label {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    padding-left: 5px;
    font-weight: bold;
}

/* --- Input and Select Styles --- */
input,
select {
  padding: 8px;
  border: 1px solid #4a6ea9;
  border-radius: 5px;
  flex: 1 1 180px; 
  min-width: 120px;
  background: #3a3a3a;
  color: #eaeaea;
  transition: all 0.3s ease; 
}

/* Selector Hover Effect */
#folder-select:hover {
    cursor: pointer; 
    box-shadow: 
        0 0 5px rgba(74, 110, 169, 0.8); 
}

/* Selector width adjustment to fit the label */
.folder-select-row select {
    flex: 1 1 100px; 
}

#folder-select {
    text-align: center;
    text-align-last: center; 
}

#folder-input-el {
    flex: 1 1 180px;
}

/* Link Input: high shrink factor to keep buttons on the same line */
#input-el {
    flex: 1 5 180px; 
    min-width: 50px; 
}

input::placeholder {
  color: #aaa;
}

button {
  background: #4a6ea9;
  color: #fff;
  border: none;
  border-radius: 5px;
  padding: 8px 15px;
  cursor: pointer;
  font-weight: bold;
  flex: 0 0 auto; 
  transition: background 0.2s ease, transform 0.1s ease;
}

button:hover {
  background: #688ad1;
  transform: scale(1.05);
}

/* --- Folder Styles --- */
.folder {
  background: #3a3a3a;
  border-radius: 10px;
  padding: 10px;
  margin-bottom: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
  max-width: 600px; 
  transition: all 0.3s ease, box-shadow 0.4s ease-in-out;
}

/* Subtle Blue Glow Effect for Selected Folder */
.folder.neon-selected {
    box-shadow: 
        0 0 8px rgba(74, 110, 169, 0.8), 
        0 0 15px rgba(74, 110, 169, 0.5); 
    border: 1px solid #4a6ea9; 
}

.folder-title {
  display: flex;
  justify-content: space-between;
  align-items: center;
  user-select: none;
  cursor: pointer; 
  padding: 4px 0; 
  margin-top: 0; 
  margin-bottom: 0;
}

.folder-label {
    cursor: text; 
    padding: 2px 4px; 
    border-radius: 4px;
    flex-grow: 1; 
}

/* Hide box when editing folder name */
.folder-label[contenteditable="true"]:focus {
  outline: none;
  box-shadow: none; 
  background-color: transparent;
  border-bottom: 2px solid #4a6ea9; 
  padding-bottom: 0px; 
}

.folder-title:hover {
  color: #9ab8ff;
}

.folder-title button {
    color: #fff; 
}

.folder-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px;
  overflow: hidden;
  transition: max-height 0.4s ease-out, opacity 0.3s ease;
  max-height: 500px;
  opacity: 1;
}

.folder-list.collapsed {
  max-height: 0;
  opacity: 0;
  pointer-events: none; 
}

/* --- Lead Item Styles --- */
.lead-item {
  margin: 6px 0;
  display: flex;
  align-items: center;
  gap: 8px;
  background: #2f2f2f;
  padding: 6px 8px;
  border-radius: 6px;
}

/* üåü FIX: Truncation for the editable link name */
.lead-name {
    flex-shrink: 0; 
    font-weight: bold;
    cursor: text;
    padding: 2px 4px; 
    border-radius: 4px;
    min-width: 50px; 
    
    /* Truncation properties */
    display: inline-block; 
    white-space: nowrap; 
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 60%; /* Allow name to take up space */
}

.lead-name[contenteditable="true"]:focus {
    outline: none;
    box-shadow: 0 0 0 2px #4a6ea9;
    background-color: #383838;
}

a {
  color: #9ab8ff;
  text-decoration: none;
  flex-grow: 1; 
  flex-shrink: 1;
  word-break: break-all;
  font-size: 0.85em; 
}

a:hover {
  text-decoration: underline;
}

/* --- Button Colors and Hover Visibility --- */

/* 1. Hide the delete folder button by default */
.delete-folder-btn {
  flex-shrink: 0;
  opacity: 0; 
  transition: opacity 0.2s ease, background 0.2s ease, transform 0.1s ease;
}

/* 2. Show the delete folder button when the parent folder is hovered */
.folder:hover .delete-folder-btn {
  opacity: 1; 
}

.delete-item-btn,
.delete-folder-btn {
  background: #b33b3b;
}

.delete-item-btn:hover,
.delete-folder-btn:hover {
  background: #d14e4e;
}